language: objective-c
osx_image: xcode7
env:
  global:
  - KIF_SCREENSHOTS=$PWD/Screens
  - secure: lDv+Wq4AwTOYxAza+n0gU51gT35tcOo97QlEWR2v+4vqakR3FROLQJQNHCTcYs2uTQV4B1F44d+J1RKnvb4MtzXq+NR/80yZv3N+Guw1RyOvBMD8jNmMq6TUuaJ01qpkX/JAMvbyvDm6L52s1RK09SUUcJTQEMkK68X7JEwfkxQuSJVS1ULlZiSw5IQHIDys+7U6uoyhllUqaBDYtcXEDKt1cDvJQpmBKgy6gQ1dLF7734Nryb0Gyi2m6zMUoLT0CRc0E/A3K07klhc35YU0OF1P4VbYU6+k/pDuCTuSq+/tAHDeu3d4dMbpFLcPwZ8OeEAkCLdZdh+vEcUmmgVpg19Pd57QdW5B0Ib9garOQ3hB8+lmW3/EpiZtA/lnuRn0t3mcu3Tr0ThhuD8JLZjB+yrPW8jvXync29SOQPDkP6FGhmapgU8f5jivww+DEIcdC12ZuYznAQanupqv4td5MwebFXZl1qyZECP6rH66kHHPvcGy4QIy1EFMwfgo8tms57u2nDOuocU2xsSTD5zBtZZ0wvzjiejN3tXg4uaso1x3Qi8VA5lbFC5zIDz2/DqOFymQfPe17+qZbX3mCm0Qi9LmCRk3c79XL8yUlfDRXNrg48aWhtED65kD0Ri1V3018g4KFwUPdR7IlvGOoeGVOIackSnbC6V4KEULkVNnKys=
  - secure: DkrV4zq8u5YkNDcgGsVpyQx4Yko6o/05Aj6mKO+jSoMslar3r48idd033nd0VYfueI4qPxA43MHnBEyk0+Jmfz147zEkJXVCu7qIsNn24HXhLszvcPTj/8nA+1eI+SYtSkwxj/cgn2TyWIWF2DDGW0dNv4jMCk4bDgpNz2hB2Z14/38YtfCf+dyuCAs9BhqxSkoeOHZ+2g/ZrvclvH39QSR/FCpASP5QTJfhuZ8nMyX8x+y+Q2kVljuG37BqR8MwdcXHBl1ufEAw9nOcWJ/dPtcFJotpEiQPWmsUK7BMPSrqH5KY1Zwh4Eh00wKA8DEIZ7k4HRxdfbUKjt+FmiYfToU5JvVReTwu54EywF6b48VvVId5KYBX9IH61uu/Jzy5BzYKkCvpv0DAkv56UEwCb/cuwZWeXWgguf7fEa+3XNvnNYLhfh/84AlFVNvq7bIV0RF/aAwKmQhv1Seml6pPp9mRXm/iPQ+EN6j0rfJ8pvvUFTl+jITGgniHy5xojLnTog2Y56+cHf+1oLupxUfuGWE8tIEsW8mcdbeDkCuqjBDh3MtFp55Wtcl6As+uNloNG7w+xEY5kEGinxthnlivv7Jt/t2V9Mqq7oF7xJy8awsioN4ajNRs2bWt+AOWNOHs+0orKcJSi+AEzLr28GMKy7+0FbvYIF0/eA915mJLc/Q=
  - secure: OhFQVEj2ykLF3F12yZBB79QWLDrBR5JcB4Ov7bIm9gGVEUfSgGTAXPUj1plZdyOI6ZXDsKXhq9GrKQznvhnpL5cb4swzrZdp4BVfpfGP0HA4FOyRGM4S0FK1gWVkzMreO3iYzHt1iInSv0xGuhuQxc77tf06gnBXhSiiCUYlx9ibx4H14BDCY37eaPnxzbkXOukYkkPpbMY9iBV2MFL8JX8QiAbHXY/8Z5wxG8SL6xme+Ng3E69+lcQ6cwEo5OrtMjdDNpAMyhnOeu2XXy3+q4arrRZo8tn/t7lfJqBWSJDUTPHEVJPKZ+P793Ok36TanhjGD4eTlB+6bCkQmC27fz5I6zLKK0CztzpQ4i9XZDAQa/B4dOJZSMhd8+FiUihuwWRvfyqkJv8a9nTIwabc0+cLfNOHrz+nNVdTIBvfTcecUVZbKs1DoKYoHl6Ux++O8sHxLsZ3bzDhHwyWis4trtZamiwGH90S467BV2Ul6LDHwD2JADcE0CQbgt6dz3A50f4bvvMN6xujaUaUPEvmlWqHJkbi0yjLL5NauSVIcFcYkkQF7eCdGHSHDIhypHuxxwEf7VQ/yEVgde6G1EG4Q8ANCBXhmghOtWrOJIguX/S3CZ2l8ImDRYS/L9ihafIg5ysGLGiiZ3jh2OeuvK/5SBq9CcgMZUgxftDzLNygCDU=
  - secure: gswPCQgmdlChtPELZDmwR2bRGzQV1xDN4zjM5KOyA6QNbnviZ4PpXiOfLAkMsymo2RzwR1s2sz6ZknhLPHwKeBnC5OsXo8GJITaFN1MhoHk+5fEuSjuKH4npeqYijRzO1MtnBfh0vDmnoP2vBaeyK+hkV/crN9rmSCgYnlKbBnlf6ftOQWFGwaG+SfV+cafAzGV1f4O3deWvUbiIGd6zlZqB+XizMC8r6cAUG889LzEUjTfnboj0Q3lhzeURWh8hrkcd7SvILtln3fBU3Q/Htl6GbX1KBIzbe5s+4ly/6iGBMhjgc/WAtRmUUI5yQQ3MvSygQILQDF2lWMNKZp6RGmvu+4IKJoh6LDC9TxVQSUhMAQaHLLxQChXDPtBzv56iQag0/nalywaNEkpKnVmgtYwWdYsF+Hi+/Bug1xQQN2XbrSWpNVQIrtr4+/YAgl3yZlzujhwCd69IyRvvVwkoGE3xgcYgD7NIQpnP+i4OigtIwbZerBL7zTX8Y5qxif9WoyagMFXP+Jyc7+MXtfgQiq1PHdfFNlofggljUvN2buMbvOCwu24FrOMTkh6n215059eNj084A4t5iRKMjrAYhmvdYSOsODXRP8vw3yzyVz534JlbCgoEs31JHEf719nOpd7aFYpzDebR4zQt2jv9pOfgQa3Ex8/QlkiUtQRVUwY=
  - secure: KytYvOPTyiKzSjsOiGajI3GswzWG1pwJDfei6suRhk7I2d4JiXzzjt/C1SLbzD7pnVUeNaC7xrWn7uMnfOzbfmXVAI1pSYlN6baVmZbWaxEazfLWI6NDsDzSx6DxcwM8IyPxh9mTNE+0QZoed4vicxD4jSVs/rAPapR/sUPUL6Zo02D/qJ9JI6FVeTDwf5cpDY9gBggVb5yvVSDMaxNfIAt4uZ18/KGsPECxI5BIiQe7I/15gN2OAGuHPoSOnxRT0IQWOn9Uwjr6HH01nuhJrrYY+fCe/eftDvKZMRxXZreXkkaILcseAzZ5JAzWaPeKBRmG9mMDHypSrkeRANTBhzu1Y31i9EQ5PtU1HMS25n6N/vlyKFTmRxB5uGU4tSeEMQUvclAx4yWcoCnhIjxp3LhC/LtVRQD4q3Ly2LhhtzCWqKympvOPbnjXcrBECw3lAqTaTy84evGOWto7lbHof1ptJ20jyAlLcJv4uCKFL4dYfSEELNBu5EZDXUjtApVnfynAzHgIE5s/T57Yown0Dcg6pxEx3r/TN1c2xoBvKuBVt88y4nYMRgBVa3w/XsxsuwUxjnMRkoJ331/BYzLOKdlw0Y/O0j2oXAA7EesPSMawCiR1cMPzndBZTmgxmINdMNP7vSitNv+gCJWfBV/v59X3dGTx5GER9ErObeejN0Y=
  - secure: 13ffK7B1Cwsy4L5picFBmR/8Aa986z5m71lfo0yQA8moLhobzg4/LQrLEZubSp0Qhc3GQnuE08YTfAoV1dyX46nWcGKFYtaWPSWf4eEKBEPiOwAQOcyXsm3aZHRdgFxQlfvBxE1j+oaX3KXiMT6S06Hs88CRDN0qcrTb0PQH/6e/kbUki+xUFyb8uy+BnmmQkEw666A4IOIOWqzUhNXLDvLkFMVWUtic+zvde+hfu/6/OA+C2vaA4AQLn05t/VaniZb/JnJ2RA8EfGOpr2lICFDRFMGHhcbaePl7Y2RGrwAMUPZE2K+8hLBn2TQk6GJdArzu6vLeggrU8k0QHmRmYd35vepnJ//xhdjCzOhIlD4ZIXcoVFVtVKyMwP9Fypx18ojfiWVb3pdoTm3R+OWKHl9mzG5KIOmwm+sGmQjzVf56Nevv60koQt72Yx5ojWvjWHrxkSVabp1XBZhnrlJ3BoYJB7nyEJTqQ+MXhLZcc0j7VPiArGT4kA8+wKhigZ5b/sQAqJM7YSuzX9XcHFQEgOC3p49GTFGKFQLWkzsBM8ZRjaFOrTi1vl+nR3kSzHiaWZzZuTx8GsMDMXuIR+yItVMLIn2BKafhi7GJoPlv0dh8WJ9fmq8sYKyivbbpzkJe3koxkkthb/iop40IkBm8YBlEUnx/HTUXmMdRNTf/Ksc=
before_install:
- brew update 1>/dev/null
- brew install doxygen nasm yasm optipng imagemagick coreutils intltool ninja antlr cmake
- wget --no-check-certificate https://raw.github.com/yuvi/gas-preprocessor/master/gas-preprocessor.pl
- chmod +x gas-preprocessor.pl
- sudo mv gas-preprocessor.pl /usr/local/bin
- sudo ln -s /usr/local/bin/glibtoolize /usr/local/bin/libtoolize
- sudo mkdir -p /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/
- sudo ln -s /usr/bin/strings /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/strings
- sudo mkdir -p /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/
- sudo ln -s /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/libxml2.tbd
  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/libxml2.dylib
  || true
- sudo mkdir -p /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/
- sudo ln -s /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/libsqlite3.tbd
  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/libsqlite3.dylib
  || true
- git submodule update --init --recursive
- bundle install
install:
- "./prepare.py -d all -G Ninja -DENABLE_WEBRTC_AEC=ON --enable-non-free-codecs"
- "./Tools/travis_script.sh"
script:
- xcodebuild -project linphone.xcodeproj -scheme linphone -sdk iphoneos -configuration Debug build CODE_SIGNING_REQUIRED=NO
after_success:
- "./Tools/release.sh"
notifications:
  flowdock:
    secure: XulX1WBdwcW09KFJOfPgRNzb08jGavzPPfpj9slg5Xk9Ib83cduJo04wVanbA92xVBsgLPNPvuu441LFqNRn3w6xbVDA75JyTmT1ih+W8VaaBZLfovrAbmpBEpXk3VUqn7UID+Hl/rkfYO+9fw+qPzJnomRMZ04ldc8hUfHH3ImfO3B8dMt1IMSaoy88A7f4/Vm4EGXWDDY35ZJxO560w5Rr9QgiALllpHdgxHDScJK73RceDi75gUfvNIZqW7c/AQI7dJ6QbQ15Esw2i/x5eHIGMYCheXPiazW6/3GONrz5cmcZ7ecEDPLMVvzKS38DN5iAFwZ5kFixS/h30WhcVsT6ZWPcDWHyJGNWGRqpwJn/IROCb+0f6Y2BtZ4ReDEq5nHPviZvN4eTi9uvWs8jE+8wh2DpJ9VfAu8UADouzxfK7W/A5YgcQA+6Q98anlAICfwCsobcS72MWa4MoUFscKlxe8byqL+ZZWxoEGq79s6OIMuVtTqpNEaLCDflHUAv9q+hDXXyTHMGhrCplQ7b8yfv7JAmmareqnz6V+FsGj3gd6sbLK+W9TQ8y8wnJAX6ZZvfIIPbqzKHc12I5Y0jJmkTLfrrMfE5kQ8uK9GquAvMsjySNYO6+0ljcLi09+yo40gi+tcRXTYtjhjqr8O5Qj0N0I+39xF/TPiaMXKqBmk=
